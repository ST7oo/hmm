<div>
  <md-tab-group>

    <!--MODEL-->
    <md-tab label="Model">
      <h2>Model</h2>
      <!--States-->
      <div class="card mdl-card mdl-shadow--2dp">
        <div class="mdl-card__title mdl-card--expand">
          <h2 class="mdl-card__title-text">States</h2>
        </div>
        <div class="mdl-card__supporting-text">
          <ul class="card_list mdl-list">
            <li class="card_item mdl-list__item" *ngFor="let state of hmm.states; let i = index">
              <span class="mdl-list__item-primary-content">
            {{state}}
          </span>
              <span class="pointer mdl-list__item-secondary-action" (click)="delete_state(i)">
            <i class="material-icons">delete</i>
          </span>
            </li>
          </ul>
        </div>
        <div class="mdl-card__actions mdl-card--border">
          <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--9-col">
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="new_state" #nstate (keyup.enter)="insert_state(nstate)">
                <label class="mdl-textfield__label" for="new_state">New state</label>
              </div>
            </div>
            <div class="mdl-cell mdl-cell--3-col">
              <button (click)="insert_state(nstate)" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-js-ripple-effect mdl-button--colored">
            <i class="material-icons">add</i>
          </button>
            </div>
          </div>
        </div>
      </div>
      <!--Observations-->
      <div class="card mdl-card mdl-shadow--2dp">
        <div class="mdl-card__title mdl-card--expand">
          <h2 class="mdl-card__title-text">Observations</h2>
        </div>
        <div class="mdl-card__supporting-text">
          <ul class="card_list mdl-list">
            <li class="card_item mdl-list__item" *ngFor="let observation of hmm.observations; let i = index">
              <span class="mdl-list__item-primary-content">
                {{observation}}
              </span>
              <span class="pointer mdl-list__item-secondary-action" (click)="delete_observation(i)">
                <i class="material-icons">delete</i>
              </span>
            </li>
          </ul>
        </div>
        <div class="mdl-card__actions mdl-card--border">
          <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--9-col">
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="new_observation" #nobservation (keyup.enter)="insert_observation(nobservation)">
                <label class="mdl-textfield__label" for="new_observation">New observation</label>
              </div>
            </div>
            <div class="mdl-cell mdl-cell--3-col">
              <button (click)="insert_observation(nobservation)" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-js-ripple-effect mdl-button--colored">
            <i class="material-icons">add</i>
          </button>
            </div>
          </div>
        </div>
      </div>
      <!--A-->
      <div class="card mdl-card mdl-shadow--2dp">
        <div class="mdl-card__title mdl-card--expand">
          <h2 class="mdl-card__title-text">Transitions</h2>
        </div>
        <div class="mdl-card__supporting-text">
          <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
            <thead>
              <tr>
                <th>(From \ To)</th>
                <th class="mdl-data-table__cell--non-numeric" *ngFor="let state of hmm.states">{{state}}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let state of hmm.states; let i = index">
                <td class="mdl-data-table__cell--non-numeric"><b>{{state}}</b></td>
                <td *ngFor="let s of hmm.states; let j = index" class="matrix_cell">
                  <!--<div class="matrix_field mdl-textfield mdl-js-textfield">
                <input class="mdl-textfield__input" type="number" step="0.1" min="0" max="1" value="{{A[i][j]}}" id="sample2">
                <label class="mdl-textfield__label" for="sample2">0</label>
              </div>-->
                  <md-input-container>
                    <input md-input [(ngModel)]="hmm.A[i][j]" type="number" step="0.1" min="0" max="1">
                  </md-input-container>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!--B-->
      <div class="card mdl-card mdl-shadow--2dp">
        <div class="mdl-card__title mdl-card--expand">
          <h2 class="mdl-card__title-text">Emissions</h2>
        </div>
        <div class="mdl-card__supporting-text">
          <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
            <thead>
              <tr>
                <th>&nbsp;</th>
                <th class="mdl-data-table__cell--non-numeric" *ngFor="let observation of hmm.observations">{{observation}}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let state of hmm.states; let i = index">
                <td class="mdl-data-table__cell--non-numeric"><b>{{state}}</b></td>
                <td class="matrix_cell" *ngFor="let o of hmm.observations; let j = index">
                  <md-input-container>
                    <input md-input type="number" step="0.1" min="0" max="1" value="{{hmm.B[i][j]}}">
                  </md-input-container>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </md-tab>

    <!--GENERATE-->
    <md-tab label="Generate">
      <h2>Generate sequence</h2>
      <md-input-container>
        <input md-input placeholder="Number of sequences" type="number" [(ngModel)]="number_sequences">
      </md-input-container>
      <button md-raised-button color="primary">Generate</button>
      <pre *ngFor="let seq of generated_sequences">{{seq}}</pre>
    </md-tab>

    <!--PATH-->
    <md-tab label="Path">
      <h2>Get most probable path using Viterbi</h2>
      <div class="mdl-grid">
        <div class="mdl-cell mdl-cell--7-col">
          <div class="card mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title mdl-card--expand">
              <h2 class="mdl-card__title-text">Observations</h2>
            </div>
            <div class="mdl-card__supporting-text">
              Click the observations to add to the sequence.
            </div>
            <div class="mdl-card__actions mdl-card--border">
              <button md-raised-button *ngFor="let observation of hmm.observations; let i = index" (click)="add_obs(i)">{{observation}}</button>
            </div>
          </div>
        </div>
        <div class="mdl-cell mdl-cell--5-col">
          <div class="card mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title mdl-card--expand">
              <h5 class="mdl-card__title-text">Sequence</h5>
            </div>
            <div class="mdl-card__supporting-text">
              <span class="mdl-chip mdl-chip--deletable" *ngFor="let seq of sequence; let i = index">
                <span class="mdl-chip__text">{{seq}}</span>
              <button type="button" class="mdl-chip__action"><i class="material-icons" (click)="remove_obs(i)">cancel</i></button>
              </span>
            </div>
            <div class="mdl-card__actions mdl-card--border">
              <button md-button color="primary" (click)="add_sequence()">Add sequence</button>
            </div>
          </div>
        </div>
      </div>
      <div class="mdl-grid">
        <button md-raised-button color="primary" (click)="viterbi()">CALCULATE</button>
      </div>
      <div *ngFor="let seq of sequences; let i = index" class="card mdl-card mdl-shadow--2dp">
        <div class="mdl-card__title mdl-card--expand">
          <h6 class="card_title_small">Sequence {{i+1}}</h6>
          <div class="mdl-layout-spacer"></div>
          <button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored" (click)="remove_sequence(i)">
            <i class="material-icons">cancel</i>
          </button>
        </div>
        <div class="mdl-card__supporting-text">
          <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
            <thead>
              <tr>
                <th class="mdl-data-table__cell--non-numeric">Observation</th>
                <th class="mdl-data-table__cell--non-numeric">State</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let s of seq">
                <td class="mdl-data-table__cell--non-numeric">{{s}}</td>
                <td class="mdl-data-table__cell--non-numeric">...</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="mdl-card__actions mdl-card--border">
          <label>Probability: </label><span>...</span>
          <!--<br>
          <button md-button color="warn" (click)="remove_sequence(i)">Remove sequence</button>-->
        </div>
      </div>
    </md-tab>

    <!--TRAIN-->
    <md-tab label="Train">
      <h2>Train using Baum-Welch</h2>
    </md-tab>
  </md-tab-group>
</div>